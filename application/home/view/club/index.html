{extend name="public/common"}

{block name="style"}
<title>我的社团</title>
<link rel="stylesheet" href="/home/css/club/index.css">
<link rel="stylesheet" href="/home/css/common/rem.css">
<link rel="stylesheet" href="/home/css/club/swiper.min.css">
<style>
    body {
        background: #fff;
        font-family: Helvetica Neue, Helvetica, Arial, sans-serif;
        font-size: 14px;
        color:#000;
        margin: 0;
        padding: 0;
    }

    .swiper-container {
        width: 100%;
        padding-top: 16vw;
        padding-bottom: 15vw;
    }
    .swiper-slide {
        background-position: center;
        background-size: cover;
        width: 72vw;
        height: 107vw;
        border-radius:3vw ;
        position: relative;
    }
    .swiper-pagination-bullet{
        background-color: #f1f1f1;!important;
    }
    .swiper-pagination-bullet{
        background-color: #999999; !important;
    }

</style>
{/block}
{block name="body"}
    <!--tab-->
<div class="tabs clear">
    <div class="tab"><span>社团活动</span></div>
    <div class="tab"><span>志愿服务</span></div>
    <span class="triangle-up"></span>
</div>
 <!--社团活动-->
<div class="notices ">
    <div class="mass">
        {volist name="clublist" id="vo"}
        <a href="{:Url('club/detail?id='.$vo.id)}" class="list">
            <img src="{$vo.front_cover|get_cover='path'}" alt="">
            <div class="list_info">
                <div class="info_text">{$vo.title}</div>
                <div class="time"> <span>建立时间 : {$vo.set_date|time_format='Y-m-d'}</span><span class="fa"></span></div>
            </div>
        </a>
        {/volist}
       <div class="tip"></div>
   </div>
</div>
<!--志愿服务-->
<div class="notices hidden">
    <!-- Swiper -->
    <div class="swiper-container">
        <div class="swiper-wrapper">
            {volist name="volunteerlist" id="vo"}
            <div class="swiper-slide" style="background-image:url(/home/images/learn/banner.png)">
                  <div class="tm_info">
                      <i></i>
                      <div class="tm_name">{$vo.title}</div>
                      <div class="info">
                          {$vo.content}
                      </div>
                      <a href="{:Url('club/volunteer?id='.$vo.id)}">查看详情</a>
                  </div>
            </div>
            {/volist}
        </div>
        <!-- Add Pagination -->
        <div class="swiper-pagination"></div>
    </div>

</div>
{/block}

{block name="script"}
<script src="/home/js/swiper.min.js"></script>

<script>

</script>
<script>
    //初始化
    var ntc = $('.notices');
    //tab切换
    $('.tabs>.tab ').on('click',function() {
        var ntc = $('.notices');
        var eq = $(this).index();
        ntc.eq(eq).siblings('.notices').addClass('hidden');
        ntc.eq(eq).removeClass('hidden');
        if(eq == 0){
            $(".triangle-up").css("left","0.06vw");
            var len = ntc.eq(eq ).find('.mass>.list').length;
            if(len >= 7){
                $('.tip' ).text('上拉加载更多');
               loadScroll(eq+1);
           }else{
               $('.tip' ).hide();
               $(window ).off("scroll" );
           }
     }
        if(eq == 1) {
            $(".triangle-up").css("left", "50.06vw");
//            var len = ntc.eq(eq).find('.lists>ul>li').length;
//            if (len >= 5) {
//                $('.tip').text('上拉加载更多');
//                loadScroll(eq + 1);
//            } else {
//                $('.tip').hide();
//                $(window).off("scroll");
//            }
            //轮播
            var swiper = new Swiper('.swiper-container', {
                effect: 'coverflow',
                grabCursor: true,
                centeredSlides: true,
                slidesPerView: 'auto',
                coverflowEffect: {
                    rotate: 50,
                    stretch: 0,
                    depth: 100,
                    modifier: 1,
                    slideShadows : true,
                },
                pagination: {
                    el: '.swiper-pagination',
                },
            });
        }
    });

</script>
{/block}